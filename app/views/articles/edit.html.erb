<%= form_with model: @article, html: { id: params.fetch(:form, dom_id(@article, :form)) } do |form| %>
  <%= form.hidden_field :form, value: form.id %>

  <%= render layout: "articles/article", object: @article do |partial| %>
    <% partial.inline_edit_fields model: @article, method: :name do %>
      <%= form.label :name, class: "sr-only" %>
      <%= form.text_field :name, form: form.id %>

      <%= form.button form: form.id %>
    <% end %>

    <% partial.content_for :action do %>
      <%= link_to "Back", article_path(@article) %>
    <% end %>

    <% partial.inline_edit_fields model: @article, method: :category_ids do %>
      <fieldset>
        <legend>
          <%= @article.class.human_attribute_name(:category_ids) %>
        </legend>

        <%= form.collection_check_boxes :category_ids, Category.all, :id, :name do |builder| %>
          <%= builder.check_box form: form.id %>
          <%= builder.label %>
        <% end %>

        <%= form.button form: form.id %>
      </fieldset>
    <% end %>

    <% partial.inline_edit_fields model: @article, method: :byline do %>
      <%= form.label :byline, class: "sr-only" %>
      <%= form.text_field :byline, form: form.id %>

      <%= form.button form: form.id %>
    <% end %>

    <% partial.inline_edit_fields model: @article, method: :published_on do %>
      <%= form.label :published_on, class: "sr-only" %>
      <%= form.date_field :published_on, form: form.id %>

      <%= form.button form: form.id %>

      <%= form.button :published_on, value: nil, form: form.id do %>
        Unpublish
      <% end %>
    <% end %>

    <% partial.inline_edit_fields model: @article, method: :content do %>
      <%= form.label :content, class: "sr-only" %>
      <%= form.rich_text_area :content, form: form.id %>

      <%= form.button form: form.id %>
    <% end %>
  <% end %>
<% end %>
